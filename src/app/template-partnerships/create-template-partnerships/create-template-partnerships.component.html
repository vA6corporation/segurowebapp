<section class="container py-4">
  <form (ngSubmit)="onSubmit()" [formGroup]="formGroup" autocomplete="off">
    <mat-form-field appearance="fill">
      <mat-label>N° de RUC</mat-label>
      <input type="text" matInput formControlName="document" maxlength="11">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Razon Social *</mat-label>
      <input type="text" matInput formControlName="name">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Fecha de constitución *</mat-label>
      <input matInput [matDatepicker]="datePicker" formControlName="constitutedAt">
      <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
      <mat-datepicker #datePicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Email *</mat-label>
      <input type="email" matInput formControlName="email" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Telefono</mat-label>
      <input type="text" matInput formControlName="phoneNumber" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Actividad economica</mat-label>
      <input type="text" matInput formControlName="economicActivity" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Direccion</mat-label>
      <input type="text" matInput formControlName="address">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Representante legal *</mat-label>
      <input type="text" matInput formControlName="representativeName">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Documento representante legal *</mat-label>
      <input type="text" matInput formControlName="representativeDocument">
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Nacionalidad del representante legal *</mat-label>
      <input type="text" matInput formControlName="representativeNationality" />
    </mat-form-field>
    <div class="mb-3">
      <mat-slide-toggle [(ngModel)]="independentAccounting" formControlName="independentAccounting">Contabilidad independiente
      </mat-slide-toggle>
    </div>
    <mat-form-field appearance="fill" *ngIf="!independentAccounting">
      <mat-label>Operador tributario</mat-label>
      <mat-select formControlName="businessId">
        <mat-option class="text-uppercase" *ngFor="let partnershipItem of partnershipItems" [value]="partnershipItem.businessId">
          {{ partnershipItem.business.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-list class="mb-1">
      <div mat-subheader>
        Empresas
      </div>
      <mat-list-item class="mb-3" *ngFor="let partnershipItem of partnershipItems; let i = index;">
        <div mat-line>
          {{ partnershipItem.business.name | uppercase }}
          <b>({{ partnershipItem.percent }}%)</b>
        </div>
        <div mat-line>{{ partnershipItem.business.document }}</div>
        <div class="spancer"></div>
        <button type="button" mat-icon-button (click)="removeBusiness(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-list-item>
      <button type="button" mat-raised-button color="primary" class="w-100 mb-3" [disabled]="isLoading" (click)="onDialogBusinesses()">AGREGAR EMPRESA</button>
    </mat-list>
    <div class="mt-3 d-flex">
      <span class="spacer"></span>
      <button type="button" mat-stroked-button color="primary" routerLink="/partnerships">CANCELAR</button>
      <div class="divider"></div>
      <button type="submit" [disabled]="isLoading" mat-raised-button color="primary">GUARDAR</button>
    </div>
  </form>
</section>